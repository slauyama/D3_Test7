(function(){"use strict";var e,t,n,i,a,o,r,s,u,d,c,l,h;Math.roundTo=function(e,t){return null==t&&(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},console.logDate=function(){var e;return arguments.length?(e="["+(new Date).toUTCString()+"] ",console.log(e,arguments)):void 0},u=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e=function(e,t,n,i,a,o,r,s,u,d,c,l,h,p,g,m,w,f,x,B,M,v,b,N,P,T,L){var y;return y={},y.componentId=e,y.name=t,y.height=44.5*n/1e3,y.width=i,y.depth=a,y.rackOrientation=o,y.adjustedXPosition=(r-T/2)/1e3,y.adjustedYPosition=(s-L/2)/1e3,y.numberingOrigin=u,y.overlappingAllowed=d,y.coolingMax=c,y.weightMax=l,y.powerMax=h,y.largestUnitLocation=p,y.largestUnitSize=g,y.usedUnitsCurrent=m,y.usedUnitsPlanned=w,y.weightCurrent=f,y.weightPlanned=x,y.heatCurrent=3.412141633*v,y.heatPlanned=3.412141633*b,y.powerCurrent=v,y.powerPlanned=b,y.powerActual=N,y.powerActualDerivation=P,y.floorPlanWidth=T/1e3,y.floorPlanHeight=L/1e3,y},i=[],i.push(new e(1470,"50M",42,483,0,0,4250,3650,0,1,35e3,500,"NULL",1,41,1,0,16,0,102,0,"NULL",0,115,1,1500,700)),i.push(new e(1471,"50N",42,483,0,0,4250,2950,0,1,35e3,500,300,1,35,5,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1472,"50O",42,483,0,0,4250,2250,0,1,35e3,500,1e4,16,27,15,0,172.8,0,12700,0,0,0,0,1,1500,700)),i.push(new e(1473,"50P",42,483,0,0,4250,1550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1500,"50Q",42,483,0,0,4250,150,1,1,35e3,500,1e4,11,22,10,0,0,0,0,0,5600,0,0,1,1500,700)),i.push(new e(1501,"50R",42,483,0,0,4250,-550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1502,"50S",42,483,0,0,4250,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1503,"50T Tile",42,483,0,0,"NULL",-1950,0,1,35e3,500,1e4,1,31,11,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1504,"50U",42,483,0,0,4250,-2650,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1474,"51M",42,483,0,0,1450,3650,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1475,"51N",42,483,0,0,1450,2950,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1476,"51O",42,483,0,0,1450,2250,0,1,35e3,500,1e4,1,38,4,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1477,"51P",42,483,0,0,1450,1550,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1478,"51Q",42,483,0,0,1450,850,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1479,"51R",42,483,0,0,1450,150,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1480,"51S",42,483,0,0,1450,-550,0,1,35e3,500,1e4,1,38,4,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1481,"51T",42,483,0,0,1450,-1250,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),i.push(new e(1482,"51U",42,483,0,0,1450,-1950,0,1,35e3,500,1e4,1,36,6,0,136,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1483,"51V",42,483,0,0,1450,-2650,0,1,35e3,500,1e4,1,42,0,0,136,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1484,"51W",42,483,0,0,1450,-3350,1,1,35e3,500,1e4,1,37,3,0,136,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1510,"51X",42,483,0,0,1450,-4050,0,1,35e3,500,1e4,1,15,16,0,422,0,32789,0,5600,0,5600,1,1500,700)),i.push(new e(1485,"52L",42,483,0,0,-1350,4350,0,1,35e3,500,1e4,1,36,2,0,68,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1486,"52M",42,483,0,0,-1350,3650,0,1,35e3,500,1e4,1,36,6,0,68,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1487,"52N",42,483,0,0,-1350,2950,0,1,35e3,500,1e4,1,36,2,0,68,0,9832,0,1900,0,1900,1,1500,700)),i.push(new e(1488,"52O",42,483,0,0,-1350,2250,0,1,35e3,500,1e4,1,28,14,0,154,0,20746,0,4500,0,4500,1,1500,700)),i.push(new e(1489,"52P",42,483,0,0,-1350,1550,0,1,35e3,500,1e4,1,24,14,0,204,0,29496,0,5700,0,5700,1,1500,700)),i.push(new e(1490,"52Q",42,483,0,0,-1350,"NULL",0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1491,"52R",42,483,0,0,-1350,150,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1492,"52S",42,483,0,0,-1350,-550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,5700,0,0,1,1500,700)),i.push(new e(1493,"52T",42,483,0,0,-1350,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1511,"52U",42,483,0,0,-1350,-1950,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1512,"52V",42,483,0,0,"NULL","NULL",0,1,35e3,500,1e4,1,28,10,0,161,0,24039,0,4400,0,4400,1,1500,700)),i.push(new e(1494,"52W",42,483,0,0,-1350,-3350,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1495,"52X",42,483,0,0,-1350,-4050,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1496,"53M",42,483,0,0,-4150,3650,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1497,"53N Tile",42,483,0,0,-4150,2950,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1498,"53O",42,483,0,0,-4150,2250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1499,"53P",42,483,0,0,-4150,1550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1505,"53Q",42,483,0,0,-4150,150,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1506,"53R",42,483,0,0,"NULL",-550,0,1,35e3,500,1e4,1,26,16,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1507,"53S",42,483,0,0,-4150,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1508,"53T",42,483,0,0,-4150,-1950,0,1,35e3,500,1e4,1,30,12,0,0,0,0,0,0,0,0,1,1500,700)),i.push(new e(1509,"53U",42,483,0,0,-4150,-2650,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),i=i.filter(function(e){return-1===e.name.indexOf("Tile")&&u(e.adjustedXPosition)&&u(e.adjustedYPosition)&&u(e.floorPlanWidth)&&u(e.floorPlanHeight)}),t={boundingBox:{minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE},maxWidth:0,maxHeight:0,setBounds:function(){this.boundingBox.minX=Math.roundTo(d3.min(i,function(e){return e.adjustedXPosition}),2),this.boundingBox.maxX=Math.roundTo(d3.max(i,function(e){return e.adjustedXPosition}),2),this.boundingBox.minY=Math.roundTo(d3.min(i,function(e){return e.adjustedYPosition}),2),this.boundingBox.maxY=Math.roundTo(d3.max(i,function(e){return e.adjustedYPosition}),2),this.maxWidth=Math.roundTo(d3.max(i,function(e){return e.floorPlanWidth}),2),this.maxHeight=Math.roundTo(d3.max(i,function(e){return e.floorPlanHeight}),2)},getFrontDistance:function(){return this.boundingBox.minY-this.maxHeight-(this.boundingBox.maxY-this.boundingBox.minX)},getBackDistance:function(){return-1*this.getFrontDistance()},getSideDistance:function(){return this.boundingBox.maxX+this.maxWidth+(this.boundingBox.maxY-this.boundingBox.minY)},getTopDistance:function(){return this.boundingBox.maxX-this.boundingBox.minY+this.boundingBox.maxY-this.boundingBox.minY}},t.setBounds(),h={initialize:function(){this.createViewpoint("Top View","0 0 0","0 0 "+t.getTopDistance(),"0.0 0.0 0.0 0.0","0.75"),this.createViewpoint("Front View","0 0 0","0 "+t.getFrontDistance()+" 0","1.0 0.0 0.0 1.570","0.95"),this.createViewpoint("Left View","0 0 0",""+-1*t.getSideDistance()+" 0 0","-0.50 0.50 0.5 4.186","0.75"),this.createViewpoint("Right View","0 0 0",""+t.getSideDistance()+" 0 0.25","0.50 0.50 0.50 2.093","0.75"),this.createViewpoint("Back View","0 0 0","0 "+t.getBackDistance()+" -.5","0.0 0.75 0.65 3.14","0.95"),this.createViewpoint("Perspective","0 0 0",""+t.getBackDistance()/3+" "+-t.getSideDistance()+" "+t.getTopDistance()/3,"1.0 0.25 0.25 1.25","0.95"),this.createPointlight(".50","1.0 1.0 1.0","1.0000 0.0000 0.0000",""+t.getSideDistance()+" 0 0","200.0"),this.createPointlight(".50","1.0 1.0 1.0","1.0000 0.0000 0.0000",""+-1*t.getSideDistance()+" 0 0","200.0")},scene:d3.select("#x3dScene"),createViewpoint:function(e,t,n,i,a){this.scene.append("viewpoint").attr("id",e).attr("centerOfRotation",t).attr("position",n).attr("orientation",i).attr("fieldOfView",a)},createPointlight:function(e,t,n,i,a){this.scene.append("pointLight").attr("intensity",e).attr("color",t).attr("attenuation",n).attr("location",i).attr("radius",a)},display:function(e){var t,n;n=this.scene.selectAll("transform").data(e),t=n.enter().append("transform").append("shape").data(e).attr("id",function(e){return"rack"+e.componentId}).attr("class","rack"),n.transition().attr("translation",function(e){return e.adjustedXPosition+" "+e.adjustedYPosition+" 0.0"}),t.append("appearance").append("material"),this.scene.selectAll("material").data(e).transition().duration(1e3).delay(500).attr("diffuseColor",function(e){return o(e)}),t.append("box").data(e).attr("size",function(e){return e.floorPlanWidth+" "+(e.floorPlanHeight-.1)+" "+e.height}),n.exit(),r(e)},setupGrid:function(e){var t,n,i,a,o,r,s,u,d,c;for(c=this.scene.append("Transform").append("shape").attr("id","grid"),c.append("appearance").append("material").attr("id","gridMaterial").attr("diffuseColor","0.8, 0.8, 0.8").attr("transparency","0.65"),n="",i="",t=0,o=Math.roundTo(.6*Math.ceil((e.boundingBox.minY-e.maxHeight)/.6-1),2),a=Math.roundTo(.6*Math.ceil((e.boundingBox.maxY+e.maxHeight)/.6+1),2),u=Math.roundTo(.6*Math.ceil((e.boundingBox.minX-e.maxWidth)/.6-1),2),s=Math.roundTo(.6*Math.ceil((e.boundingBox.maxX+e.maxWidth)/.6+1),2),r=u;s>=r;)i+=""+r+" "+o+" -1 ",i+=""+r+" "+a+" -1 ",n+=""+t+" "+(t+1)+" -1 ",r=Math.roundTo(r+.6,2),t+=2;for(r=o;a>=r;)i+=""+u+" "+r+" -1 ",i+=""+s+" "+r+" -1 ",n+=""+t+" "+(t+1)+" -1 ",r=Math.roundTo(r+.6,2),t+=2;return d=c.append("indexedLineSet").attr("coordIndex","#{coordinateConnections}"),d.append("coordinate").attr("point",""+i)}},h.initialize(),a=function(e,t,n){var i,a,o,r;for(r=[],a=0,o=Number.MAX_VALUE,i=function(e,n){return d3.max(e,function(e){var i;return i=e[t],u(i)&&n>i?i:void 0})};n>a;)r[a]=i(e,o),o=r[a],a++;return r},s=function(e,t,n,i){var o,r,s,u,d,c,l,h,p;for(d=a(e,t,3),c=[],u=function(){var n,i,a;for(a=[],n=0,i=e.length;i>n;n++)s=e[n],a.push(s[t]===d[o]);return a}(),o=0;o<d.length;){for(r=u,console.log(r),c[o]=d[o]+i+" rack"+(r.length>1?"s:":":"),h=0,p=r.length;p>h;h++)s=r[h],c[o]+=" "+s.name;c[o]+=" ("+r.length+" total)",o++}for(o=0;o<d.length;)l=n+(o+1),document.getElementsByClassName(l)[0].innerHTML=c[o],o++},r=function(e){s(e,"powerCurrent","power"," watts"),s(e,"heatCurrent","heat","BTUs"),s(e,"weightCurrent","weight","lb"),s(e,"usedUnitsCurrent","used-units"," used units"),s(e,"largestUnitLocation","largest-unit-location",""),s(e,"largestUnitSize","largest-unit-size"," unit size")},r(i),n=function(e){var t;for(t=document.getElementsByClassName(e);t.length;)t[0].className=t[0].className.replace(e,"")},setInterval(function(){return h.display(i)},1e4),o=function(e){var t,n,i,a,o,r,s;switch(t=!1,document.getElementsByClassName("selected-color")[0].value){case"Power":s=e.powerCurrent/e.powerMax,u(s)||(t=!0);break;case"Weight":s=e.weightCurrent/e.weightMax,u(s)||(t=!0);break;case"Temperature":s=e.heatCurrent/e.coolingMax,u(s)||(t=!0);break;default:t=!0}return.5>s?(o=Math.floor(255*s),i=200):(o=255,i=Math.floor(255*(1-s))),r=(16>o?"0":"")+o.toString(16),a=(16>i?"0":"")+i.toString(16),n="#"+r+a+"00",t&&(n="steelblue"),n},c=function(){n("selected-view"),this.className+=" selected-view",document.getElementById(this.value).setAttribute("set_bind","true")},l=function(){n("selected-color"),this.className+=" selected-color",h.display(i)},h.setupGrid(t),d=function(){var e,t,a;e=document.getElementsByClassName("selected-view")[0].className.replace("button","").replace("selected-view","").replace("view","").replace(/\s/,""),a=parseInt(e)<document.getElementsByClassName("camera-option")[0].children.length-1?parseInt(e)+1:0,t=document.getElementsByClassName("view"+a)[0],n("selected-view"),t.className+=" selected-view",document.getElementById(t.value).setAttribute("set_bind","true"),h.display(i)},window.onload=function(){var e,t,n,a,o,r,s,u;for(s=document.getElementsByClassName("color-option")[0].children,n=0,o=s.length;o>n;n++)t=s[n],t.onmouseover=l;for(u=document.getElementsByClassName("camera-option")[0].children,a=0,r=u.length;r>a;a++)e=u[a],e.onmouseover=c;h.display(i),document.getElementById("grid-toggle").onclick=function(){document.getElementById("gridMaterial").transparency="1.0"===document.getElementById("gridMaterial").transparency?".65":"1.0"},document.getElementById("view-shuffle").onclick=function(){var e;document.getElementById("view-shuffle").checked===!0?e=setInterval(function(){return d()},1e4):window.clearInterval(e)}}}).call(this);