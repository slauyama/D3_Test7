(function(){"use strict";var e,t,n,o,i,r,a,u,s,l,d,c,p,h,m,g,f,w,x,B,b,v;Math.roundTo=function(e,t){return null==t&&(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},console.logDate=function(){var e;return arguments.length?(e="["+(new Date).toUTCString()+"] ",console.log(e,arguments)):void 0},l=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t=function(e,t,n,o,i,r,a,u,s,l,d,c,p,h,m,g,f,w,x,B,b,v,M,y,S,T,P){var N;return N={},N.componentID=e,N.name=t,N.rackUnitHeight=44.5*n/1e3,N.width=o,N.depth=i,N.rackOrientation=r,N.xPosition=(a-T/2)/1e3,N.yPosition=(u-P/2)/1e3,N.numberingOrigin=s,N.overlappingAllowed=l,N.coolingMax=d,N.weightMax=c,N.powerMax=p,N.largestUnitLocation=h,N.largestUnitSize=m,N.usedUnitsCurrent=g,N.usedUnitsPlanned=f,N.weightCurrent=w,N.weightPlanned=x,N.temperatureCurrent=B,N.temperaturePlanned=b,N.powerCurrent=v,N.powerPlanned=M,N.powerActual=y,N.powerActualDerivation=S,N.floorPlanWidth=T/1e3,N.floorPlanHeight=P/1e3,N},r=[],r.push(new t(1470,"50M",42,483,0,0,4250,3650,0,1,35e3,500,"NULL",1,41,1,0,16,0,102,0,"NULL",0,115,1,1500,700)),r.push(new t(1471,"50N",42,483,0,0,4250,2950,0,1,35e3,500,300,1,35,5,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1472,"50O",42,483,0,0,4250,2250,0,1,35e3,500,1e4,16,27,15,0,172.8,0,12700,0,0,0,0,1,1500,700)),r.push(new t(1473,"50P",42,483,0,0,4250,1550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1500,"50Q",42,483,0,0,4250,150,1,1,35e3,500,1e4,11,22,10,0,0,0,0,0,5600,0,0,1,1500,700)),r.push(new t(1501,"50R",42,483,0,0,4250,-550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1502,"50S",42,483,0,0,4250,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1503,"50T Tile",42,483,0,0,"NULL",-1950,0,1,35e3,500,1e4,1,31,11,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1504,"50U",42,483,0,0,4250,-2650,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1474,"51M",42,483,0,0,1450,3650,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1475,"51N",42,483,0,0,1450,2950,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1476,"51O",42,483,0,0,1450,2250,0,1,35e3,500,1e4,1,38,4,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1477,"51P",42,483,0,0,1450,1550,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1478,"51Q",42,483,0,0,1450,850,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1479,"51R",42,483,0,0,1450,150,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1480,"51S",42,483,0,0,1450,-550,0,1,35e3,500,1e4,1,38,4,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1481,"51T",42,483,0,0,1450,-1250,0,1,35e3,500,1e4,1,42,0,0,86,0,5457,0,1300,0,1300,1,1500,700)),r.push(new t(1482,"51U",42,483,0,0,1450,-1950,0,1,35e3,500,1e4,1,36,6,0,136,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1483,"51V",42,483,0,0,1450,-2650,0,1,35e3,500,1e4,1,42,0,0,136,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1484,"51W",42,483,0,0,1450,-3350,1,1,35e3,500,1e4,1,37,3,0,136,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1510,"51X",42,483,0,0,1450,-4050,0,1,35e3,500,1e4,1,15,16,0,422,0,32789,0,5600,0,5600,1,1500,700)),r.push(new t(1485,"52L",42,483,0,0,-1350,4350,0,1,35e3,500,1e4,1,36,2,0,68,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1486,"52M",42,483,0,0,-1350,3650,0,1,35e3,500,1e4,1,36,6,0,68,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1487,"52N",42,483,0,0,-1350,2950,0,1,35e3,500,1e4,1,36,2,0,68,0,9832,0,1900,0,1900,1,1500,700)),r.push(new t(1488,"52O",42,483,0,0,-1350,2250,0,1,35e3,500,1e4,1,28,14,0,154,0,20746,0,4500,0,4500,1,1500,700)),r.push(new t(1489,"52P",42,483,0,0,-1350,1550,0,1,35e3,500,1e4,1,24,14,0,204,0,29496,0,5700,0,5700,1,1500,700)),r.push(new t(1490,"52Q",42,483,0,0,-1350,"NULL",0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1491,"52R",42,483,0,0,-1350,150,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1492,"52S",42,483,0,0,-1350,-550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,5700,0,0,1,1500,700)),r.push(new t(1493,"52T",42,483,0,0,-1350,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1511,"52U",42,483,0,0,-1350,-1950,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1512,"52V",42,483,0,0,"NULL","NULL",0,1,35e3,500,1e4,1,28,10,0,161,0,24039,0,4400,0,4400,1,1500,700)),r.push(new t(1494,"52W",42,483,0,0,-1350,-3350,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1495,"52X",42,483,0,0,-1350,-4050,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1496,"53M",42,483,0,0,-4150,3650,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1497,"53N Tile",42,483,0,0,-4150,2950,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1498,"53O",42,483,0,0,-4150,2250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1499,"53P",42,483,0,0,-4150,1550,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1505,"53Q",42,483,0,0,-4150,150,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1506,"53R",42,483,0,0,"NULL",-550,0,1,35e3,500,1e4,1,26,16,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1507,"53S",42,483,0,0,-4150,-1250,0,1,35e3,500,1e4,1,42,0,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1508,"53T",42,483,0,0,-4150,-1950,0,1,35e3,500,1e4,1,30,12,0,0,0,0,0,0,0,0,1,1500,700)),r.push(new t(1509,"53U",42,483,0,0,-4150,-2650,0,1,35e3,500,1e4,1,32,10,0,0,0,0,0,0,0,0,1,1500,700)),console.log(r.length),r=r.filter(function(e){return-1===e.name.indexOf("Tile")&&l(e.xPosition)&&l(e.yPosition)&&l(e.floorPlanWidth)&&l(e.floorPlanHeight)}),console.log(r.length),o={boundingBox:{minX:e,maxX:-e,minY:e,maxY:-e},maxWidth:-e,maxHeight:-e,resetBounds:function(){this.boundingBox.minX=this.boundingBox.minY=e,this.boundingBox.maxX=this.boundingBox.maxY=-e,this.maxWidth=this.maxHeight=-e},calculateBounds:function(){this.resetBounds(),this.boundingBox.minX=Math.roundTo(d3.min(r,function(e){return e.xPosition}),2),this.boundingBox.maxX=Math.roundTo(d3.max(r,function(e){return e.xPosition}),2),this.boundingBox.minY=Math.roundTo(d3.min(r,function(e){return e.yPosition}),2),this.boundingBox.maxY=Math.roundTo(d3.max(r,function(e){return e.yPosition}),2),this.maxWidth=Math.roundTo(d3.max(r,function(e){return e.floorPlanWidth}),2),this.maxHeight=Math.roundTo(d3.max(r,function(e){return e.floorPlanHeight}),2)}},o.calculateBounds(),u=o.boundingBox.minY-o.maxHeight-(o.boundingBox.maxX-o.boundingBox.minX),n=-u,m=o.boundingBox.maxX+o.maxWidth+(o.boundingBox.maxY-o.boundingBox.minY),x=o.boundingBox.maxX-o.boundingBox.minY+(o.boundingBox.maxY-o.boundingBox.minY),b=d3.select("#x3dElement").attr("height","400px").attr("width","700px"),v=b.append("button").attr("id","zoom-in"),document.getElementById("zoom-in").innerHTML="Zoom In",v=b.append("button").attr("id","zoom-out"),document.getElementById("zoom-out").innerHTML="Zoom Out",c=b.append("scene"),c.append("viewpoint").attr("id","Top View").attr("centerOfRotation","0 0 0").attr("position","0 0 "+x).attr("orientation","0.0 0.0 0.0 0.0").attr("fieldOfView","0.75"),c.append("viewpoint").attr("id","Front View").attr("centerOfRotation","0 0 0").attr("position","0 "+u+" 0").attr("orientation","1.0 0.0 0.0 1.570").attr("fieldOfView","0.95"),c.append("viewpoint").attr("id","Left View").attr("centerOfRotation","0 0 0").attr("position",""+-m+" 0 0.25").attr("orientation","-0.50 0.50 0.50 4.186").attr("fieldOfView","0.95"),c.append("viewpoint").attr("id","Right View").attr("centerOfRotation","0 0 0").attr("position",""+m+" 0 0.25").attr("orientation","0.50 0.50 0.50 2.093").attr("fieldOfView","0.95"),c.append("viewpoint").attr("id","Back View").attr("centerOfRotation","0 0 0").attr("position","0.0 "+n+" -.50").attr("orientation","0.0 0.75 0.65 3.14").attr("fieldOfView","0.95"),c.append("viewpoint").attr("id","Perspective").attr("centerOfRotation","0 0 0").attr("position",""+n/3+" "+-m+" "+x/3).attr("orientation","1.0 0.25 0.25 1.25").attr("fieldOfView","0.95"),c.append("PointLight").attr("on","TRUE").attr("intensity",".50").attr("color","1.0 1.0 1.0").attr("attenuation","1.0000 0.0000 0.0000").attr("location",""+m+" 0 0").attr("radius","200.0"),c.append("PointLight").attr("on","TRUE").attr("intensity",".50").attr("color","1.0 1.0 1.0").attr("attenuation","1.0000 0.0000 0.0000").attr("location",""+-m+" 0 0").attr("radius","200.0"),e=9007199254740992,d=function(){console.log("justforshure")},B=function(e,t,n,o){var i,r;r=[],r[0]=d3.max(e,function(e){return"number"==typeof e[t.toString()]?e[t.toString()]:void 0}),r[1]=d3.max(e,function(e){return"number"==typeof e[t.toString()]&&e[t.toString()]<r[0]?e[t.toString()]:void 0}),r[2]=d3.max(e,function(e){return"number"==typeof e[t.toString()]&&e[t.toString()]<r[1]?e[t.toString()]:void 0}),i=e.filter(function(e){return e[t.toString()]===r[0]}),r[0]=r[0].toString()+o.toString()+" rack"+(i.length>1?"s:":":"),i.forEach(function(e){return r[0]+=" "+e.name}),r[0]+=" ("+i.length+" total)",i=e.filter(function(e){return e[t.toString()]===r[1]}),r[1]=r[1].toString()+o.toString()+" rack"+(i.length>1?"s:":":"),i.forEach(function(e){return r[1]+=" "+e.name}),r[1]+=" ("+i.length+" total)",i=e.filter(function(e){return e[t.toString()]===r[2]}),r[2]=r[2].toString()+o.toString()+" rack"+(i.length>1?"s:":":"),i.forEach(function(e){return r[2]+=" "+e.name}),r[2]+=" ("+i.length+" total)",document.getElementsByClassName(n.toString()+"1")[0].innerHTML=r[0],document.getElementsByClassName(n.toString()+"2")[0].innerHTML=r[1],document.getElementsByClassName(n.toString()+"3")[0].innerHTML=r[2]},w=function(e){B(e,"powerCurrent","power"," ohms"),B(e,"temperatureCurrent","temperature","&#186;K"),B(e,"weightCurrent","weight","lb"),B(e,"usedUnitsCurrent","used-units"," used units"),B(e,"largestUnitLocation","largest-unit-location"," units"),B(e,"largestUnitSize","largest-unit-size"," unit size")},i=function(e){var t;for(t=document.getElementsByClassName(e);t.length;)t[0].className=t[0].className.replace(e,"")},a=function(e){var t,n;n=c.selectAll("transform").data(e),t=n.enter().append("transform").append("shape").data(e).attr("id",function(e){return"rack"+e.componentID}).attr("class","rack"),n.transition().attr("translation",function(e){return e.xPosition+" "+e.yPosition+" 0.0"}),t.append("appearance").append("material"),c.selectAll("material").data(e).transition().duration(1e3).delay(500).attr("diffuseColor",function(e){return p(e)}),t.append("box").data(e).attr("size",function(e){return e.floorPlanWidth+" "+(e.floorPlanHeight-.1)+" "+e.rackUnitHeight}),w(e)},setInterval(function(){return a(r)},1e4),p=function(e){var t,n,o;switch(document.getElementsByClassName("selected-color")[0].value){case"Power":o=e.powerCurrent/e.powerMax,o=l(o)?o:"steelblue";break;case"Weight":o=e.weightCurrent/e.weightMax,o=l(o)?o:"steelblue";break;case"Temperature":o=e.temperatureCurrent/e.coolingMax,o=l(o)?o:"steelblue";break;default:o="steelblue"}return"steelblue"===o?"steelblue":(.5>o?(n=Math.floor(255*o),t=200):(n=255,t=Math.floor(255*(1-o))),"#"+(16>n?"0":"")+n.toString(16)+(16>t?"0":"")+t.toString(16)+"00")},g=function(){i("selected-view"),this.className+=" selected-view",document.getElementById(this.value).setAttribute("set_bind","true")},f=function(){return i("selected-color"),this.className+=" selected-color",a(r)},s=function(e){var t,n,o,i,r,a,u,s,l,d;for(d=c.append("Transform").append("Shape").attr("id","grid"),d.append("Appearance").append("Material").attr("id","gridMaterial").attr("diffuseColor","0.8, 0.8, 0.8").attr("transparency","0.65"),t="",u="",s=0,o=Math.roundTo(.6*Math.ceil((e.boundingBox.minY-e.maxHeight)/.6-1),2),n=Math.roundTo(.6*Math.ceil((e.boundingBox.maxY+e.maxHeight)/.6+1),2),a=Math.roundTo(.6*Math.ceil((e.boundingBox.minX-e.maxWidth)/.6-1),2),r=Math.roundTo(.6*Math.ceil((e.boundingBox.maxX+e.maxWidth)/.6+1),2),i=a;r>=i;)u+=""+i+" "+o+" -1 "+i+" "+n+" -1 ",t+=""+s+" "+(s+1)+" -1 ",i=Math.roundTo(i+.6,2),s+=2;for(i=o;n>=i;)u+=""+a+" "+i+" -1 "+r+" "+i+" -1 ",t+=""+s+" "+(s+1)+" -1 ",i=Math.roundTo(i+.6,2),s+=2;return l=d.append("IndexedLineSet").attr("coordIndex","#{coordinateString}"),l.append("Coordinate").attr("point",""+u)},s(o),h=function(){var e,t,n;e=document.getElementsByClassName("selected-view")[0].className.replace("button","").replace("selected-view","").replace("view","").replace(/\s/,""),n=parseInt(e)<document.getElementsByClassName("camera-option")[0].children.length-1?parseInt(e)+1:0,t=document.getElementsByClassName("view"+n.toString())[0],i("selected-view"),t.className+=" selected-view",document.getElementById(t.value).setAttribute("set_bind","true"),a(r)},window.onload=function(){var e,t,n,o,i,u,s,l;for(s=document.getElementsByClassName("color-option")[0].children,n=0,i=s.length;i>n;n++)t=s[n],t.onmouseover=f;for(l=document.getElementsByClassName("camera-option")[0].children,o=0,u=l.length;u>o;o++)e=l[o],e.onmouseover=g;a(r),document.getElementById("grid-toggle").onclick=function(){document.getElementById("gridMaterial").transparency="1.0"===document.getElementById("gridMaterial").transparency?".65":"1.0"},document.getElementById("view-shuffle").onclick=function(){var e;document.getElementById("view-shuffle").checked===!0?e=setInterval(function(){return h()},1e4):window.clearInterval(e)}}}).call(this);